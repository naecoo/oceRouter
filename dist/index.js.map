{"version":3,"file":"index.js.map","sources":["../src/util.js","../src/match.js","../src/index.js"],"sourcesContent":["export function initRoutes (routes = []) {\r\n  const routesMap = new Map()\r\n  try {\r\n    routes.forEach(route => {\r\n      const { path, exact = false, sensitive = false, strict = false, match } = route\r\n      routesMap.set(path, { exact, sensitive, strict, match})\r\n    })\r\n  } catch (e) {\r\n    throw new Error('Route must have path and match function!')\r\n  }\r\n\r\n  return routesMap\r\n}\r\n\r\n// export function createHistory () {\r\n//   const history = window.history\r\n//   return {\r\n//     length: history.length,\r\n//     push: (path, state = null) => {\r\n//       history.pushState(path, state)\r\n//     },\r\n//     replace: (path, state = null) => {\r\n//       history.replaceState(path, state)\r\n//     },\r\n//     go: (n) => history.go(n),\r\n//     forward: () => history.go(1),\r\n//     back: () => hisotory.go(-1)\r\n//   }\r\n// }\r\n\r\nexport function createLocation () {\r\n  const { pathname, search, hash } = window.location\r\n  return {\r\n    pathname,\r\n    search,\r\n    hash\r\n  }\r\n}\r\n\r\nexport function getCurrentPathName () {\r\n  return window.location.pathname || '/'\r\n}\r\n","import pathToRegexp from 'path-to-regexp'\r\n\r\nfunction compilePath (path, options) {\r\n  const keys = []\r\n  const re =  pathToRegexp(path, keys, options)\r\n  return {\r\n    re,\r\n    keys\r\n  }\r\n}\r\n\r\nfunction matchPath (pathName, options = {}) {\r\n  if (pathName === undefined || pathName === null) return null\r\n\r\n  const { path, exact = false, strict = false, sensitive = false } = options  \r\n\r\n  const { re , keys } = compilePath(path, { end: exact, strict, sensitive })\r\n\r\n  const match = re.exec(pathName)\r\n  if(!match) return null\r\n\r\n  const url = match[0], values = match.slice(1)\r\n  const isExact = pathName === url\r\n  \r\n  if(exact && !isExact) return null\r\n\r\n  return {\r\n    path,\r\n    url: path === \"/\" && url === \"\" ? \"/\" : url,\r\n    isExact: exact,\r\n    params: keys.reduce((memo, key, index) => {\r\n      memo[key.name] = values[index]\r\n      return memo\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default matchPath","import { initRoutes, getCurrentPathName ,createHistory, createLocation }from './util'\r\nimport matchPath from './match'\r\nconst history = window.history\r\nclass Router {\r\n  constructor (routes) {\r\n    if (!window || !window.history) {\r\n      throw new Error('we need HTML5 history API support!')\r\n    }\r\n    this.routes = initRoutes(routes)\r\n    this.update()\r\n    window.addEventListener('popstate', this.update.bind(this))\r\n  }\r\n  \r\n  update () {\r\n    this.routes.forEach((value, key) => {\r\n      const pathName = getCurrentPathName()\r\n      const options = {\r\n        path: key,\r\n        exact: value.exact,\r\n        sensitive: value.exact,\r\n        strict: value.strict\r\n      }\r\n      const match = matchPath(pathName, options)\r\n      if (!match) return\r\n      const location = createLocation()\r\n      value['match'](location, match)\r\n    })\r\n  }\r\n\r\n  pushState(path, state = null) {\r\n    history.pushState(state, null, path)\r\n    this.update()\r\n  }\r\n\r\n  replaceState(path, state = null) {\r\n    history.replaceState(state, null, path)\r\n    this.update()\r\n  }\r\n  \r\n  go (n) {\r\n    if (typeof n !== 'number') return \r\n    history.go(n)\r\n  }\r\n\r\n  back () {\r\n    this.go(-1)\r\n  }\r\n\r\n  forward () {\r\n    this.go(1)\r\n  }\r\n}\r\n\r\nexport default Router"],"names":[],"mappings":"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"}